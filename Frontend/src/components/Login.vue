<template>
  <v-layout align-center justify-center>
    <v-flex xs12 sm8 md6 lg5 x14>
      <v-flex xs12>
        <svg
          width="550"
          height="300"
          viewBox="0 0 63.260918 40.440071"
          version="1.1"
          id="svg8"
          inkscape:version="1.0.2-2 (e86c870879, 2021-01-15)"
          sodipodi:docname="logo2.svg"
        >
          <defs id="defs2">
            <rect
              x="85.275391"
              y="161.18777"
              width="45.23053"
              height="18.726015"
              id="rect867"
            />
            <rect
              x="87.292038"
              y="177.60905"
              width="20.886709"
              height="15.124859"
              id="rect855"
            />
            <rect
              x="27.944977"
              y="140.73322"
              width="87.003944"
              height="38.892494"
              id="rect835"
            />
          </defs>
          <sodipodi:namedview
            id="base"
            pagecolor="#ffffff"
            bordercolor="#666666"
            borderopacity="1.0"
            inkscape:pageopacity="0.0"
            inkscape:pageshadow="2"
            inkscape:zoom="2.6683652"
            inkscape:cx="121.19135"
            inkscape:cy="12.832165"
            inkscape:document-units="mm"
            inkscape:current-layer="texto"
            inkscape:document-rotation="0"
            showgrid="false"
            units="px"
            fit-margin-top="0"
            fit-margin-left="0"
            fit-margin-right="0"
            fit-margin-bottom="0"
            inkscape:window-width="2400"
            inkscape:window-height="1271"
            inkscape:window-x="2391"
            inkscape:window-y="-9"
            inkscape:window-maximized="1"
          />
          <g
            inkscape:label="Capa 1"
            inkscape:groupmode="layer"
            id="layer1"
            transform="translate(-13.636172,-125.7107)"
          >
            <g id="logo">
              <g id="texto">
                <text
                  xml:space="preserve"
                  id="text833"
                  style="
                    font-size: 10.5833px;
                    line-height: 1.25;
                    font-family: 'Bauhaus 93';
                    -inkscape-font-specification: 'Bauhaus 93, Normal';
                    white-space: pre;
                    shape-inside: url(#rect835);
                  "
                >
                  <tspan x="27.945312" y="150.52919">
                    <tspan
                      style="
                        font-style: normal;
                        font-variant: normal;
                        font-weight: bold;
                        font-stretch: normal;
                        font-size: 10.5833px;
                        font-family: Raleway;
                        -inkscape-font-specification: 'Raleway, Bold';
                        font-variant-ligatures: normal;
                        font-variant-caps: normal;
                        font-variant-numeric: normal;
                        font-variant-east-asian: normal;
                      "
                    >
                      pro
                    </tspan>
                    <tspan
                      style="
                        font-style: normal;
                        font-variant: normal;
                        font-weight: bold;
                        font-stretch: normal;
                        font-size: 10.5833px;
                        font-family: Raleway;
                        -inkscape-font-specification: 'Raleway, Bold';
                        font-variant-ligatures: normal;
                        font-variant-caps: normal;
                        font-variant-numeric: normal;
                        font-variant-east-asian: normal;
                        fill: #2196f3;
                        fill-opacity: 1;
                      "
                    >
                      Q
                    </tspan>
                    <tspan
                      style="
                        font-style: normal;
                        font-variant: normal;
                        font-weight: normal;
                        font-stretch: normal;
                        font-size: 10.5833px;
                        font-family: Raleway;
                        -inkscape-font-specification: 'Raleway, Normal';
                        font-variant-ligatures: normal;
                        font-variant-caps: normal;
                        font-variant-numeric: normal;
                        font-variant-east-asian: normal;
                      "
                    >
                      ratio
                    </tspan>
                    <tspan
                      style="
                        font-style: normal;
                        font-variant: normal;
                        font-weight: normal;
                        font-stretch: normal;
                        font-size: 10.5833px;
                        font-family: 'Arial Unicode MS';
                        -inkscape-font-specification: 'Arial Unicode MS, Normal';
                        font-variant-ligatures: normal;
                        font-variant-caps: normal;
                        font-variant-numeric: normal;
                        font-variant-east-asian: normal;
                      "
                    ></tspan>
                  </tspan>
                </text>
                <text
                  xml:space="preserve"
                  style="
                    font-style: normal;
                    font-variant: normal;
                    font-weight: normal;
                    font-stretch: normal;
                    font-size: 5.02091px;
                    line-height: 1.25;
                    font-family: 'Lucida Sans Typewriter';
                    -inkscape-font-specification: 'Lucida Sans Typewriter, Normal';
                    font-variant-ligatures: normal;
                    font-variant-caps: normal;
                    font-variant-numeric: normal;
                    font-variant-east-asian: normal;
                    stroke-width: 0.125523;
                  "
                  x="70.388"
                  y="146.94511"
                  id="text861"
                  transform="scale(1.0496278,0.95271866)"
                >
                  <tspan
                    sodipodi:role="line"
                    id="tspan859"
                    x="70.388"
                    y="146.94511"
                    style="
                      font-style: normal;
                      font-variant: normal;
                      font-weight: normal;
                      font-stretch: normal;
                      font-size: 5.02091px;
                      font-family: 'Lucida Sans Typewriter';
                      -inkscape-font-specification: 'Lucida Sans Typewriter, Normal';
                      font-variant-ligatures: normal;
                      font-variant-caps: normal;
                      font-variant-numeric: normal;
                      font-variant-east-asian: normal;
                      stroke-width: 0.125523;
                    "
                  />
                  <tspan
                    sodipodi:role="line"
                    x="70.388"
                    y="153.22125"
                    style="
                      font-style: normal;
                      font-variant: normal;
                      font-weight: normal;
                      font-stretch: normal;
                      font-size: 5.02091px;
                      font-family: 'Lucida Sans Typewriter';
                      -inkscape-font-specification: 'Lucida Sans Typewriter, Normal';
                      font-variant-ligatures: normal;
                      font-variant-caps: normal;
                      font-variant-numeric: normal;
                      font-variant-east-asian: normal;
                      stroke-width: 0.125523;
                    "
                    id="tspan863"
                  >
                    Â©
                  </tspan>
                </text>
                <text
                  xml:space="preserve"
                  id="text865"
                  style="
                    font-style: normal;
                    font-variant: normal;
                    font-weight: normal;
                    font-stretch: normal;
                    font-size: 10.5833px;
                    line-height: 1.25;
                    font-family: 'Arial Rounded MT Bold';
                    -inkscape-font-specification: 'Arial Rounded MT Bold, Normal';
                    font-variant-ligatures: normal;
                    font-variant-caps: normal;
                    font-variant-numeric: normal;
                    font-variant-east-asian: normal;
                    white-space: pre;
                    shape-inside: url(#rect867);
                  "
                  transform="matrix(0.42986256,0,0,0.41927617,18.273968,83.655052)"
                >
                  <tspan x="85.275391" y="170.98426">
                    <tspan
                      style="
                        font-style: normal;
                        font-variant: normal;
                        font-weight: normal;
                        font-stretch: normal;
                        font-size: 10.5833px;
                        font-family: Raleway;
                        -inkscape-font-specification: 'Raleway, Normal';
                        font-variant-ligatures: normal;
                        font-variant-caps: normal;
                        font-variant-numeric: normal;
                        font-variant-east-asian: normal;
                      "
                    >
                      software
                    </tspan>
                  </tspan>
                </text>
              </g>
              <path
                sodipodi:type="star"
                style="
                  fill: #2196f3;
                  fill-opacity: 1;
                  fill-rule: evenodd;
                  stroke: #3d3d3d;
                  stroke-width: 0;
                  stroke-linejoin: bevel;
                  stroke-dasharray: none;
                "
                id="path843"
                sodipodi:sides="6"
                sodipodi:cx="137.99632"
                sodipodi:cy="116.24534"
                sodipodi:r1="8.6870766"
                sodipodi:r2="7.5232296"
                sodipodi:arg1="2.438362"
                sodipodi:arg2="2.9619608"
                inkscape:flatsided="true"
                inkscape:rounded="-1.32"
                inkscape:randomized="7.101"
                d="m 166.17596,181.40745 c 7.2394,3.75376 -19.82124,-61.27795 -33.34451,-70.28625 -13.52326,-9.00829 -24.30159,15.47539 -2.96694,51.21729 21.33464,35.7419 4.19308,-135.261869 3.16259,-111.398633 -1.03049,23.863235 -60.969122,80.431303 -24.22749,93.538983 36.74164,13.10768 50.51265,-111.178957 30.05494,-75.720897 -20.45772,35.458057 20.08201,108.895747 27.32141,112.649507 z"
                inkscape:transform-center-x="1.1277315e-06"
                transform="matrix(0.26843285,0,0,0.30424878,-12.373607,110.91023)"
                inkscape:transform-center-y="-1.9765575e-06"
              />
            </g>
            <text
              xml:space="preserve"
              id="text853"
              style="
                font-size: 10.5833px;
                line-height: 1.25;
                font-family: 'Bauhaus 93';
                -inkscape-font-specification: 'Bauhaus 93, Normal';
                white-space: pre;
                shape-inside: url(#rect855);
              "
            />
          </g>
        </svg>
      </v-flex>
      <v-card>
        <v-toolbar dark color="info">
          Please Login to access to the system
        </v-toolbar>
        <v-card-text>
          <v-text-field v-model="email" color="accent" label="Email" required>
          </v-text-field>
          <v-text-field
            v-model="password"
            type="password"
            color="accent"
            label="Password"
            required
          >
          </v-text-field>
          <v-flex class="red--text" v-if="errorLoginMessage">
            {{ errorLoginMessage }}
          </v-flex>
        </v-card-text>
        <v-card-actions class="px-3 pb-3">
          <v-flex text-xs-right>
            <v-btn @click="login()" color="info">Go!</v-btn>
          </v-flex>
        </v-card-actions>
      </v-card>
    </v-flex>
  </v-layout>
</template>

<script>
import axios from "axios";
export default {
  data() {
    return {
      email: "",
      password: "",
      errorLoginMessage: null,
    };
  },
  methods: {
    /**
     * @vuese
     * Method that checks the password and email of the user who wants to enter the system.
     */
    login() {
      axios
        .post("user/login", { email: this.email, password: this.password })
        .then((response) => {
          return response.data;
        })
        .then((data) => {
          this.$store.dispatch("saveToken", data.tokenReturn);
          this.$router.push({ name: "home" });
        })
        .catch((error) => {
          this.errorLoginMessage = null;
          if (error.response.status == 404) {
            this.errorLoginMessage = "User not found or incorrect password";
          } else {
            this.errorLoginMessage = "Server error";
          }
        });
    },
  },
};
</script>
